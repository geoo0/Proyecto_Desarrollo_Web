<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <title>SIGLAD – Usuarios (ADMIN)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-4">
    <h3 class="mb-3">Panel de Usuarios (ADMIN)</h3>
    <p id="info" class="text-muted">Verificando sesión...</p>
    <a class="btn btn-secondary btn-sm" href="/index.html">Volver al login</a>
  </div>
  <script>
    (async () => {
      const t = localStorage.getItem('token');
      if(!t){ location.href='/index.html'; return; }
      const r = await fetch('/api/auth/me', { headers:{ Authorization:'Bearer '+t }});
      const data = await r.json();
      document.getElementById('info').textContent = JSON.stringify(data,null,2);
      if(!r.ok || data?.data?.user?.role!=='ADMIN'){
        alert('Acceso restringido. Se requiere rol ADMIN.');
        location.href='/index.html';
      }
    })();
  </script>
</body>
</html>
